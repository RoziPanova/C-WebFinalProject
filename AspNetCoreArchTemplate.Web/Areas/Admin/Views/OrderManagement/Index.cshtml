@model AspNetCoreArchTemplate.Web.ViewModels.Admin.OrderManagement.OrderManagementViewModel

@{
    ViewData["Title"] = "Manage Orders";
}

<h2 class="mb-4">Orders Management</h2>

<ul class="nav nav-tabs" id="orderTabs" role="tablist">
    <li class="nav-item">
        <a class="nav-link active" id="orders-tab" data-bs-toggle="tab" href="#orders" role="tab">Regular Orders</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="custom-orders-tab" data-bs-toggle="tab" href="#custom-orders" role="tab">Custom Orders</a>
    </li>
</ul>

<div class="tab-content mt-3">
    <!-- Regular Orders -->
    <div class="tab-pane fade show active" id="orders" role="tabpanel">
        @if (Model.Orders != null && Model.Orders.Any())
        {
            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>Order ID</th>
                        <th>Customer</th>
                        <th>Total Items</th>
                        <th>Total Amount</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var order in Model.Orders)
                    {
                        <tr>
                            <td>@order.Id</td>
                            <td>@order.CustomerName</td>
                            <td>@order.TotalItemsCount</td>
                            <td>$@order.TotalAmount</td>
                            <td>
                                <a asp-action="Details" asp-route-id="@order.Id" class="btn btn-sm btn-info">View</a>
                                <form asp-action="DeleteOrder" asp-route-id="@order.Id" method="post" class="d-inline">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete this order?')">Delete</button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <p class="text-muted">No regular orders found.</p>
        }
    </div>

    <!-- Custom Orders -->
    <div class="tab-pane fade" id="custom-orders" role="tabpanel">
        @if (Model.CustomOrders != null && Model.CustomOrders.Any())
        {
            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>Order ID</th>
                        <th>Customer</th>
                        <th>Phone</th>
                        <th>Address</th>
                        <th>Needed By</th>
                        <th>Details</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var customOrder in Model.CustomOrders)
                    {
                        <tr>
                            <td>@customOrder.Id</td>
                            <td>@customOrder.CustomerName</td>
                            <td>@customOrder.CustomerPhoneNumber</td>
                            <td>@customOrder.CustomerAddress</td>
                            <td>@customOrder.CustomOrderNeededBy.ToString("yyyy-MM-dd")</td>
                            <td>@customOrder.CustomOrderDetails</td>
                            <td>
                                <a asp-action="DetailsCustomOrder" asp-route-id="@customOrder.Id" class="btn btn-sm btn-info">View</a>
                                <form asp-action="DeleteCustomOrder" asp-route-id="@customOrder.Id" method="post" class="d-inline">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete this custom order?')">Delete</button>
                                </form>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <p class="text-muted">No custom orders found.</p>
        }
    </div>
</div>
